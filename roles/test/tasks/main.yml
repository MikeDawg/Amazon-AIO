---
# Tasks for setting up NAT Gateways
- name: Gateways - Gather facts about my VPC
  local_action:
    module: ec2_vpc_net_facts
    region: "{{ aws_region }}"
    filters:
      "tag:Name": "{{ vpc_name }}"
  register: vpcdata

- name: Export VPC ID for future use
  debug:
   var: vpcdata.vpcs[0].id

- name: Gateways - Gather facts Internet Gateways
  local_action:
    module: ec2_vpc_igw_facts
    region: "{{ aws_region }}"
  register: igw_facts

- name: Export IGW ID for future use
  debug:
   var: igw_facts.internet_gateways[0].internet_gateway_id
